<!doctype html>
<html lang="en">
<head>
    <title>Newswall</title>
    <%# Refresh this page every displayFor minutes and marks the current item as previous in query param so that we try to pick a different paper next time %>
    <meta http-equiv="refresh" content="<%=paper.displayFor * 60%>;/latest?prev=<%=paper.id%>">
    <style>
        * {
            margin: 0;
        }
        .paper-container {
            height: <%=display.height%>px;
            width: <%=display.width%>px;
            border: 1px solid;
            overflow: hidden;
        }
        .paper-container img {
            height: 100%;
            width: 100%;
            object-fit: contain;
        }
        .paper-container .statusbar {
            <% statusBarFontSize = 10 %>
            position: absolute;
            font-size: <%=statusBarFontSize%>px;
            font-family: serif;
            padding-left: <%=statusBarFontSize%>px;
            top: <%=display.height - 2*statusBarFontSize%>px;
        }
    </style>
</head>
<body>
    <div class="paper-container">
        <img src="/archive/<%=paper.date%>/<%=paper.id%>.png" style="transform: scale(<%=paper.scale%>)" alt="<%=paper.name%> for <%=paper.date%>">
        <% if (display.status ) { %>
            <%# Display next refresh time, WiFi strength and battery level in the bottom left -%>
            <% const now = new Date(); now.setSeconds(now.getSeconds() + paper.displayFor * 60) %>
            <div class="statusbar"><%=now.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })%> ðŸ”„&emsp;<%=display.status.wifi%>% ðŸ“¶&emsp;<%=display.status.battery%>% <%=display.status.battery > 50 ? 'ðŸ”‹' : 'ðŸª«'%></div>
        <% } %>
    </div>
</body>
</html>
